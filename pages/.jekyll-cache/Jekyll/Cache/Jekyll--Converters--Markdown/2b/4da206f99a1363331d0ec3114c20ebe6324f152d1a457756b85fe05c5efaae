I"ð<p>CalyxOS uses Googleâ€™s Android Linux kernel with some additional modifications for certain features on top. It can be built within the CalyxOS sources, either during the OS build process, or separately using Googleâ€™s build scripts.</p>

<h2 id="building-it-during-the-os-build">Building it during the OS build</h2>
<ul>
  <li>This assumes youâ€™re following the steps to <a href="../">Build CalyxOS</a></li>
</ul>

<p>Simply run:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">export INLINE_KERNEL_BUILDING=true</code> before running <code class="language-plaintext highlighter-rouge">m</code> and it will build the kernel while building the OS.</li>
</ul>

<h2 id="building-it-separately">Building it separately</h2>
<ul>
  <li>This is the process used for official builds, since
    <ul>
      <li>The kernel is shared between Pixels of the same family. Which means 1 kernel build usually ends up covering 2 devices (e.g. Pixel 2 and 2 XL share the kernel)</li>
      <li>The kernel usually does not change that often, so itâ€™s beneficial to build it separately to avoid having to build the exact same source code every time.</li>
    </ul>
  </li>
</ul>

<p>In your source code directory (i.e. <code class="language-plaintext highlighter-rouge">~/calyxos/android11-qpr</code>)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd kernel
./build_kernel.sh sunfish # Replace sunfish (Pixel 4a) with your device codename
</code></pre></div></div>

<p>This will build the kernel, and it also copies it to the corect directory directly (<code class="language-plaintext highlighter-rouge">device/google/sunfish-kernel</code> for Pixel 4a), and it will get picked up by the OS build directly.</p>
:ET